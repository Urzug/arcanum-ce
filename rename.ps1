param(
  [string]$SearchDir = ".",
  [switch]$DryRun
)

Write-Host "Starting FULL batch rename operation across: $SearchDir"
Write-Host "Targeting ALL .c and .h files recursively..."
Write-Host "--------------------------------------------------------"

# --- Mapping old -> new ---
$RenameMap = @{
"sub_4E1490" = "wall_editor_update"
"sub_4E1C00" = "wall_draw_rects_top_down"
"sub_4E1EB0" = "wall_draw_grid_overlay_top_down"
"sub_4E20A0" = "wall_delete_piece_group_A"
"sub_4E25B0" = "wall_delete_piece_group_B"
"sub_4E2C50" = "wall_update_adjacent_on_delete"
"sub_439890" = "roof_hit_test_screen_xy"
"sub_439FF0" = "roof_is_tile_covered_world_xy"
"sub_43A030" = "roof_is_tile_covered"
"sub_4395C0" = "roof_grid_index_from_tile_id"
"sub_43A140" = "roof_get_art_screen_rect"
"sub_438530" = "wallcheck_notify_player_moved"
"sub_502FD0" = "tig_art_is_pixel_transparent"
"sub_438570" = "wallcheck_add_or_update_wall"
"sub_4386B0" = "wallcheck_find_wall_in_list"
"sub_438720" = "wallcheck_roof_ref_add"
"sub_4387C0" = "wallcheck_find_roof_in_list"
"sub_438830" = "wallcheck_apply_changes"
"sub_404480" = "ai_get_ai_packet_field"
"sub_4044F0" = "ai_get_ai_packet_flag"
"sub_404550" = "ai_get_ai_packet_secondary_flag"
"sub_4045B0" = "ai_set_ai_packet_flag"
"sub_404E20" = "ai_set_target"
"sub_404E80" = "ai_find_target_in_list"
"sub_4057A0" = "ai_should_flee"
"sub_405820" = "ai_is_pc_or_follower"
"sub_405860" = "ai_is_berserk"
"sub_4068D0" = "ai_consider_target"
"sub_406930" = "ai_find_best_target"
"sub_406AE0" = "ai_can_see_obj"
"sub_404280" = "ai_find_new_target"
"sub_404390" = "ai_execute_strategy"
"sub_404610" = "ai_process_list"
"sub_404C70" = "ai_aggro_add"
"sub_404F70" = "ai_find_target_in_sorted_list_bsearch"
"sub_405020" = "ai_flee"
"sub_4058A0" = "ai_update_obj"
"sub_405AC0" = "ai_strategy_wander"
"sub_405D20" = "ai_strategy_wander_flee"
"sub_406210" = "ai_strategy_flee_from_object"
"sub_4064F0" = "ai_strategy_berserk"
"sub_406730" = "ai_strategy_stand_still"
"sub_423300" = "anim_get_current_id"
"sub_4233D0" = "anim_get_priority_level"
"sub_423470" = "anim_is_running"
"sub_4234F0" = "anim_is_combat_anim"
"sub_423E60" = "anim_set_debug_error_msg"
"sub_423FE0" = "anim_set_completion_callback"
"sub_423FF0" = "anim_clear_goals"
"sub_424070" = "anim_set_priority_level"
"sub_4243E0" = "anim_play_eye_candy_on_obj"
"sub_424560" = "anim_play_eye_candy_on_obj_ex"
"sub_4261E0" = "anim_path_get_dist"
"sub_426250" = "anim_path_get_rot_to"
"sub_426560" = "anim_path_find"
"sub_427000" = "anim_path_is_clear"
"sub_430460" = "anim_draw_all_overlays"
"sub_430490" = "anim_draw_obj_overlay"
"sub_432D90" = "anim_process_obj_goals"
"sub_433640" = "anim_is_obj_convinced_to_move"
"sub_433A00" = "anim_goal_move_to"
"sub_433C80" = "anim_goal_run_to"
"sub_434030" = "anim_goal_move_to_combat"
"sub_4341C0" = "anim_goal_move_near_loc"
"sub_434400" = "anim_goal_move_near_loc_combat"
"sub_4348E0" = "anim_deduct_action_points"
"sub_435A00" = "anim_goal_projectile_fire"
"sub_435CE0" = "anim_goal_is_projectile"
"sub_4364D0" = "anim_goal_death"
"sub_436C20" = "anim_goals_push_state"
"sub_436C50" = "anim_goals_set_current"
"sub_436C80" = "anim_goals_pop_state"
"sub_436CF0" = "anim_goals_clear_current"
"sub_436D20" = "anim_set_flags"
"sub_436ED0" = "anim_run"
"sub_4372B0" = "anim_can_move"
"sub_437980" = "anim_init_run_info_params"
"sub_437CF0" = "anim_run_info_param_set"
"stru_5E8AD0" = "g_multiplayer_player_slots"
"stru_5B3FF0" = "g_multiplayer_save_modules"
"dword_5F0E1C" = "g_multiplayer_object_lock_list"
"stru_5E8940" = "g_multiplayer_async_callbacks"
"dword_5F0DEC" = "g_multiplayer_save_obj_list"
"qword_5E8D78" = "g_multiplayer_trade_partners"
"qword_5F0E20" = "g_multiplayer_hidden_items"
"dword_5B4070" = "g_multiplayer_timeevent_filter_player_idx"
"dword_5B40D8" = "g_multiplayer_player_find_iterator"
"byte_5E8838" = "g_multiplayer_module_path_stripped"
"byte_5F0BEC" = "g_multiplayer_module_path_guid"
"off_5F0BC8" = "g_multiplayer_char_data_slots"
"stru_5F0D98" = "g_multiplayer_current_module_guid"
"dword_5F0DE0" = "g_multiplayer_join_request_count"
"dword_5F0DE4" = "g_multiplayer_pregen_char_handles"
"dword_5F0DE8" = "g_multiplayer_pregen_char_count"
"dword_5F0DF4" = "g_multiplayer_level_scheme_next_idx"
"dword_5F0DFC" = "g_multiplayer_message_queue_head"
"dword_5F0E00" = "g_multiplayer_session_active"
"off_5F0E04" = "g_multiplayer_game_update_override"
"dword_5F0E10" = "g_multiplayer_reset_lock_count"
"dword_5F0E14" = "g_multiplayer_disconnect_pending"
"dword_5F0E18" = "g_multiplayer_async_callback_next_idx"
"dword_5B3FD8" = "g_multiplayer_current_difficulty"
"dword_5B3FEC" = "g_multiplayer_disconnect_button_handle"
"multiplayer_mes_file" = "g_multiplayer_mes_file"
"multiplayer_lock_cnt" = "g_multiplayer_lock_count"
"dword_5F0E08" = "g_multiplayer_client_joined_callback"
"dword_5F0DF8" = "g_multiplayer_disconnect_callback"
"S5F0DEC" = "MultiplayerObjectNode"
"S5E8AD0" = "MultiplayerPlayerSlot"
"S5F0DFC" = "MultiplayerMessageNode"
"S5F0E1C" = "MultiplayerObjectLock"
"S5F0BC8" = "MultiplayerCharDataHeader"
"S5E8940" = "MultiplayerAsyncCallback"
"Func5F0E08" = "MultiplayerClientJoinedCallback"
"Func5F0DF8" = "MultiplayerDisconnectCallback"
"sub_49CB80" = "multiplayer_player_slot_init"
"sub_49CC50" = "multiplayer_start_server"
"sub_49CC70" = "multiplayer_load_module_and_start"
"sub_4A38B0" = "multiplayer_disconnect"
"sub_4A39D0" = "multiplayer_set_disconnect_callback"
"sub_4A5610" = "multiplayer_apply_settings"
"sub_4A1F60" = "multiplayer_get_player_obj"
"sub_4A2AE0" = "multiplayer_reset_player_slot"
"sub_4A2B60" = "multiplayer_get_player_obj_by_slot"
"sub_4A3D00" = "multiplayer_clear_pregen_char_list"
"sub_4A3D70" = "multiplayer_load_pregen_chars"
"sub_4A40D0" = "multiplayer_has_char_data"
"sub_4A40F0" = "multiplayer_set_char_data"
"sub_4A4180" = "multiplayer_get_char_data_ptr"
"sub_4A41B0" = "multiplayer_get_char_data_size"
"sub_4A41E0" = "multiplayer_get_char_data_oid"
"sub_4A4230" = "multiplayer_get_char_data_header"
"sub_4A4240" = "multiplayer_get_char_data_total_size"
"sub_4A4320" = "multiplayer_save_local_char"
"sub_4A6010" = "multiplayer_reset_critter_state"
"sub_4A6470" = "multiplayer_save_char_with_prompt"
"sub_4A6560" = "multiplayer_strip_guid_from_filename"
"sub_49D570" = "multiplayer_timeevent_is_xfer"
"sub_4A2040" = "multiplayer_send_loading_state"
"sub_4A2A30" = "multiplayer_update_game_state"
"sub_4A2B00" = "multiplayer_set_client_joined_callback"
"sub_4A2CD0" = "multiplayer_queue_message"
"sub_4A2D00" = "multiplayer_process_message_queue"
"sub_4A33F0" = "multiplayer_send_map_data_to_player"
"sub_4A3660" = "multiplayer_send_player_files"
"sub_4A3780" = "multiplayer_send_local_player_files_to_host"
"sub_4A54A0" = "multiplayer_anim_ping_handler"
"sub_4A54E0" = "multiplayer_magictech_ping_handler"
"sub_4A2E90" = "multiplayer_clear_object_locks"
"sub_4A2EC0" = "multiplayer_acquire_object_lock"
"sub_4A3030" = "multiplayer_add_object_lock"
"sub_4A3080" = "multiplayer_find_object_lock"
"sub_4A30D0" = "multiplayer_release_object_lock"
"sub_4A3170" = "multiplayer_remove_object_lock"
"sub_4A3230" = "multiplayer_request_object_lock"
"sub_4A50D0" = "multiplayer_hide_item"
"sub_4A51C0" = "multiplayer_show_item"
"sub_4A5290" = "multiplayer_init_hidden_items"
"sub_4A52C0" = "multiplayer_add_hidden_item"
"sub_4A5320" = "multiplayer_remove_hidden_item"
"sub_4A5380" = "multiplayer_init_trade_list"
"sub_4A53B0" = "multiplayer_set_active_trade_partner"
"sub_4A5460" = "multiplayer_get_trade_partner_count"
"sub_4A5670" = "multiplayer_auto_equip_char"
"sub_4A5710" = "multiplayer_auto_equip_give_money"
"sub_4A57F0" = "multiplayer_auto_equip_give_background_items"
"sub_4A5840" = "multiplayer_auto_equip_give_skill_items"
"sub_4A5920" = "multiplayer_auto_equip_give_items_from_mes"
"sub_4A59F0" = "multiplayer_auto_equip_give_weapon_items"
"sub_4A5CA0" = "multiplayer_auto_equip_give_armor"
"sub_4A5D80" = "multiplayer_auto_equip_check_has_items"
"sub_4A5E10" = "multiplayer_auto_equip_give_items_from_string"
"sub_4A5EE0" = "multiplayer_auto_equip_give_schematic_items"
"sub_4A1F30" = "multiplayer_teleport_obj"
"sub_4A3890" = "multiplayer_nop"
"sub_4A38A0" = "multiplayer_get_join_request_count"
"sub_4A4270" = "multiplayer_inc_lock_reset"
"sub_4A4280" = "multiplayer_dec_lock_reset"
"sub_4A55F0" = "multiplayer_get_difficulty"
"sub_4A5600" = "multiplayer_set_difficulty"
"sub_4A6190" = "multiplayer_is_pvp_damage_disallowed"
"sub_5022B0" = "tig_art_set_palette_adjust_callback"
"sub_5022C0" = "tig_art_get_palette_adjust_callback"
"sub_5022D0" = "tig_art_cache_invalidate_palettes"
"sub_502830" = "tig_art_item_id_get_max_num"
"sub_502E00" = "tig_art_palette_exists"
"sub_502E50" = "tig_art_frame_get_pixel_color"
"sub_503340" = "tig_art_frame_get_raw_pixels"
"sub_5033E0" = "tig_art_anim_get_frames_for_distance"
"sub_503700" = "tig_art_tile_id_get_edge_data"
"sub_503740" = "tig_art_tile_id_set_edge_data"
"sub_5037B0" = "tig_art_tile_id_get_variation_data"
"sub_503800" = "tig_art_tile_id_set_variation_data"
"sub_503F50" = "tig_art_anim_get_property"
"sub_503F60" = "tig_art_critter_get_size_class"
"sub_504390" = "tig_art_interface_id_get_flag"
"sub_504700" = "tig_art_light_id_rotation_get"
"sub_504730" = "tig_art_light_id_rotation_set"
"sub_504790" = "tig_art_light_id_get_rotation_mode_flag"
"sub_505000" = "tig_art_apply_palette_adjustment"
"sub_505940" = "art_blit_flags_to_video_blit_flags"
"sub_5059F0" = "art_blit_software"
"sub_51AA90" = "tig_art_cache_get_or_load_entry"
"sub_51B650" = "tig_art_cache_entry_free_video_buffers"
"sub_51B710" = "tig_art_file_load"
"sub_51BE30" = "art_header_get_num_rotations"
"sub_51BE50" = "tig_art_file_load_cleanup"
"sub_51BF20" = "art_header_free_frame_data"
"dword_5BE880" = "tig_art_tile_edge_map_1"
"dword_5BE8C0" = "tig_art_tile_edge_map_2"
"dword_5BE900" = "tig_art_anim_properties"
"dword_5BE980" = "tig_art_critter_body_type_properties"
"dword_5BE994" = "tig_art_monster_specie_properties"
"dword_5BEA18" = "tig_art_wall_rotation_map_1"
"dword_5BEA28" = "tig_art_wall_rotation_map_2"
"dword_604714" = "tig_art_cache_last_index"
"dword_604718" = "tig_art_use_3d_textures"
"dword_604744" = "tig_art_palette_adjust_callback"
"dword_604754" = "tig_art_check_stretch_blit_divide_by_zero"
"sub_4E6540" = "objid_create_a"
"sub_4E67A0" = "objid_parse_guid_str"
"sub_4E6970" = "objid_parse_p_str"
"sub_4E6A60" = "objid_parse_a_str"
"sub_4E6AA0" = "parse_hex_str_len"
"sub_4E6B00" = "validate_and_copy_hex_str_len"
"sub_4E4FD0" = "objp_perm_lookup_set"
"sub_4E5280" = "objp_perm_get_oid"
"sub_4E52F0" = "objp_perm_lookup_remove"
"sub_4E5300" = "objp_perm_lookup_compact"
"sub_4E57E0" = "objp_perm_lookup_find_index"
"dword_6036B8" = "objp_perm_lookup_table"
"dword_6036C0" = "objp_perm_lookup_capacity"
"dword_6036DC" = "objp_perm_lookup_size"
"sub_4B2210" = "combat_context_init"
"sub_4B2650" = "combat_projectile_hit_callback"
"sub_4B2690" = "combat_projectile_finish"
"sub_4B2870" = "combat_projectile_update"
"sub_4B2F60" = "combat_process_projectile_hit"
"sub_4B3170" = "combat_attack_resolve"
"sub_4B3BB0" = "combat_attack"
"sub_4B4320" = "combat_fidget_check"
"sub_4B5520" = "combat_multiplayer_is_damage_handled"
"sub_4B6C90" = "combat_set_turn_based_mode"
"sub_4B7010" = "combat_tb_process_npc_turn"
"sub_4B7080" = "combat_tb_queue_next_subturn"
"sub_4B7580" = "combat_tb_should_skip_critter"
"sub_4B7DC0" = "combat_tb_critter_is_hidden_and_active"
"sub_4B8040" = "combat_tb_npc_should_fidget"
"sub_4440E0" = "follower_info_init"
"sub_444110" = "follower_info_find"
"sub_444130" = "follower_info_validate"
"sub_43C690" = "object_draw_hover_overlay"
"sub_43CF70" = "object_remove_from_sector"
"sub_43D940" = "object_is_static_type"
"sub_43D9F0" = "object_find_by_screen_coords"
"sub_43E770" = "object_move"
"sub_43F030" = "object_invalidate_render_flags"
"sub_43F710" = "object_scenery_update_animation"
"sub_443770" = "object_clear_render_data"
"sub_4437E0" = "object_get_hover_rect_total"
"sub_443880" = "object_get_hover_art_rect"
"sub_443EB0" = "object_save_ref_init"
"sub_443F80" = "object_save_ref_find"
"sub_444020" = "object_save_ref_validate"
"sub_4445A0" = "object_move_to_actor"
"sub_43C5C0" = "object_draw_hover_underlay"
"sub_43CEA0" = "object_editor_delete"
"sub_43D690" = "object_get_hp_from_points"
"sub_43D630" = "object_get_hp_from_stats"
"sub_43FE00" = "object_check_los_recursive"
"sub_43FDC0" = "object_check_los"
"sub_43FD70" = "object_is_los_blocked"
"sub_442050" = "object_serialize_to_memory"
"sub_4420D0" = "object_deserialize_from_memory"
"sub_442260" = "object_insert_into_world"
"sub_4423E0" = "object_set_offset_internal"
"sub_442520" = "object_update_render_state"
"sub_442D90" = "object_apply_render_colors"
"sub_443620" = "object_get_eye_candy_rect"
"sub_4437C0" = "object_shadow_clear"
"sub_43AAA0" = "object_editor_is_culling_enabled"
"sub_43AAB0" = "object_editor_toggle_culling"
"sub_43F130" = "object_set_palette"
"sub_440700" = "object_is_portal_blocked"
"sub_441FC0" = "object_notify_npc_seen"
"sub_441540" = "object_get_party_size"
"dword_5A548C" = "g_eye_candy_scale_table"
"dword_5E2E70" = "g_object_dirty_rect_list"
"dword_5E2EC8" = "g_object_render_skip_flags"
"dword_5E2F28" = "g_object_editor_culling_enabled"
"dword_5E2F98" = "g_object_list_ref_count"
"dword_5E2E68" = "g_object_hover_overlay_art_slot"
"dword_5E2E6C" = "g_object_hover_underlay_art_slot"
"dword_5E2F48" = "g_video_is_3d_accelerated"
"stru_5E2F60" = "g_object_hover_save_ref"
"dword_5E2E94" = "g_object_hover_is_critter"
"qword_5E2E60" = "g_object_vis_range_y"
"qword_5E2F50" = "g_object_vis_range_x"
"sub_4E5AA0" = "field_metadata_acquire"
"sub_4E5B40" = "field_metadata_release"
"sub_4E5BF0" = "field_metadata_clone"
"sub_4E5C60" = "field_metadata_set_or_clear_bit"
"sub_4E5CE0" = "field_metadata_test_bit"
"sub_4E5D30" = "field_metadata_count_set_bits_up_to"
"sub_4E5DB0" = "field_metadata_iterate_set_bits"
"sub_4E5E20" = "field_metadata_serialize_to_tig_file"
"sub_4E5E80" = "field_metadata_deserialize_from_tig_file"
"sub_4E5F10" = "field_metadata_calculate_export_size"
"sub_4E5F30" = "field_metadata_export_to_memory"
"sub_4E5F70" = "field_metadata_import_from_memory"
"sub_4E4C50" = "memory_read_from_cursor"
"sub_4EB0C0" = "GetTileNameByType"
"sub_4EC4B0" = "InitializePortalNames"
"sub_4EC8F0" = "GetPortalNameFromArtID"
"sub_4EC940" = "GetWallArtIDFromFilename"
"sub_4ECB80" = "ParseWallProtoEntry"
"sub_4ECC00" = "GetWallProtoDamageArtId"
"dword_687680" = "g_tileCategoryBufferSizes"
"dword_603AF8" = "g_tileEdgeData"
"sub_4EB860" = "CheckTileConnectivitySetup"
"sub_4EB770" = "ParseTileEdgeName"
"sub_4EB7D0" = "FindTileIndexByName"
"sub_4EB8D0" = "FindPathBetweenTiles"
"sub_4D9240" = "GetTileHeight"
"sub_426320" = "CalculateMaxPathRotations"
"sub_4A8570" = "AICheckActionPreconditions"
"sub_460C20" = "GetUIActiveObject"
"sub_4AA620" = "AIInitiateFollow"
"sub_4AABE0" = "AISetOrUpdateDangerSource"
"sub_4A9AD0" = "InitiateCombat"
"dword_5F848C" = "g_onCombatInitiationCallback"
"sub_4A9F10" = "AINotifyNearbyNPCsOfEvent"
"sub_4ADE00" = "FindLineOfSightBlocker"
"sub_4AF640" = "CalculateHearingObstructionPenalty"
"dword_5B50C0" = "g_loudnessDistanceTable"
"sub_4AB990" = "AIIsValidShitlistTarget"
"sub_4C1110" = "GetPCWithHighestReaction"
"sub_4C0CE0" = "GetReactionScore"
"sub_4C1290" = "CalculateReactionModifier"
"sub_4C12F0" = "GetReactionLevelForPC"
"sub_4C1360" = "SetReactionLevelForPC"
"sub_42A490" = "AnimGoalUsePicklockSkill"
"sub_4246D0" = "AnimGoalMoveToPause"
"sub_42A440" = "AnimGoalUsePickpocketSkill"
"sub_42B090" = "AnimGoalGenericSelfObj"
"sub_421CE0" = "IsAnimIDMatchForRunInfo"
"sub_422430" = "SaveAnimationGoalParameter"
"sub_422A50" = "LoadAnimationGoalParameter"
"dword_5A597C" = "g_animGoalParamTypes"
"sub_423D10" = "UpdateAnimationGoal"
"sub_425760" = "IsValidAnimationMoveTarget"
"sub_42ACD0" = "AnimGoalCheckTarget"
"sub_437990" = "GetAnimationRate"
"sub_42EF60" = "CheckDirectionalCondition"
"sub_42F000" = "UpdateProjectileAnimation"
"sub_437C50" = "GetPathCoordsAtIndex"
"sub_44E2C0" = "InterruptAnimation"
"sub_4CCD20" = "GetAnimFXNodeByID"
"sub_4CD7A0" = "AddAnimFX"
"sub_44D520" = "StartAnimationGoal"
"sub_44D4E0" = "AnimGoalDataInit"
"sub_44E8C0" = "IsObjectAnimating"
"dword_5B770C" = "g_animFXScaleValues"
"off_5B0530" = "g_animGoalDataParamNames"
"sub_44C840" = "AnimRunSetGoalNode"
"sub_44E6F0" = "AnimGoalAddWithArgs"
"sub_44E940" = "FindAnimationByGoalType"
"sub_44EB40" = "IsPathingToObject"
"sub_44EBD0" = "AnimPathReset"
"sub_44EBE0" = "AnimPathClear"
"sub_44EBF0" = "AnimRunInfoAdvanceGoal"
"sub_4AE720" = "CanCastSpellOrUseTech"
"sub_4503A0" = "IsTechnologicalSchematic"
"sub_450B40" = "ItemHasCharges"
"sub_459040" = "GetObjectSummonerIfSpellFlag"
"sub_455960" = "MagicTechRunInfoFree"
"sub_45BAF0" = "TimeEventAdd"
"sub_45DC90" = "AdjustAlignmentOnKill"
"sub_4574D0" = "ProcessItemUseCompletion"
"sub_461620" = "CalculateMagicTechEffectivenessModifier"
"sub_461F60" = "IsItemWorthless"
"sub_463E20" = "SpawnInventory"
"sub_4EFAE0" = "SetInventorySpawnedFlag"
"sub_4685A0" = "GetProtoHandleFromID"
"sub_4640C0" = "RefreshInventoryForNearbyPlayers"
"sub_4642C0" = "IsItemInInventory"
"sub_464C50" = "WieldItemToFirstAvailableSlot"
"sub_464D20" = "CheckCanWieldItem"
"sub_466A50" = "AddKeyToKeyring"
"sub_467E70" = "GetItemForceRemoveStatus"
"sub_4F2CB0" = "TargetFindAtScreenCoords"
"sub_4F2D10" = "TargetGetHoverTarget"
"sub_4F2D20" = "ValidateTargetEligibility"
"sub_4F4E40" = "FindLocationNearObject"
"sub_41F3C0" = "PathCreate"
"sub_41F840" = "PathfindDirect"
"sub_41F9F0" = "PathfindAStar"
"sub_420330" = "PathBresenhamLineProcessor"
"sub_420660" = "PathCreateProjectile"
"dword_5DE5F8" = "g_pathfinding_timer_start"
"dword_5DE5FC" = "g_pathfinding_op_count"
"dword_5DE600" = "g_pathfinding_time_limit_ms"
"sub_41AFB0" = "SoundSchemeInit"
"sub_41BAF0" = "UpdateAmbientSound"
"sub_41BCD0" = "ResolveSoundPath"
"sub_41BD10" = "FindActiveSoundScheme"
"sub_41BF70" = "ParseAndAddSoundToScheme"
"dword_5D1A30" = "g_preCombatMusicSchemes"
"sub_40DAB0" = "PlayerDestroyLocalPC"
"sub_40DAF0" = "PlayerSetLocalPC"
"sub_40FED0" = "UIEnterTurnBasedMode"
"sub_412F60" = "DialogFileFreeEntries"
"sub_414F50" = "FindPCReplyOptions"
"sub_417590" = "ParseDialogResponseValue"
"sub_41D390" = "GetMissingArtCount"
"sub_44BC60" = "ScriptFindInitBlock"
"sub_45B300" = "TimeEventIsProcessingAllowed"
"sub_45B320" = "TimeEventPause"
"sub_45B340" = "TimeEventResume"
"sub_45B360" = "TimeEventResetPause"
"sub_45A7F0" = "GetCurrentGameTimeMs"
"sub_45A950" = "DateTimeAddMilliseconds"
"sub_44E2A0" = "IsGlobalTimeEvent"
"sub_4B9130" = "ScreenRectToLocationRect"
"sub_4D0090" = "GetSectorDataForLocationRect"
"dword_5B0CBC" = "g_magictech_test_obj_field_map"
"dword_5B32A0" = "g_ammo_type_to_obj_field_map"
"dword_5B32B0" = "g_ammo_type_to_proto_map"
"dword_5B772C" = "g_scale_index_map"
"in_reset" = "g_is_in_reset"
"in_load" = "g_is_loading_game"
"dword_5D10C4" = "g_module_guid_is_set"
"dword_5DE640..5DE668" = "g_anim_state_counters"
"dword_5DE69C..5DE6B0" = "g_anim_state_flags"
"qword_5FC248..5FC270" = "g_combat_turn_state_vars"
"dword_60170C" = "g_animfx_list_registry"
"stru_601700" = "g_animfx_current_anim_id"
"dword_601734" = "g_animfx_mes_handle"
"stru_5B0DF8" = "g_summon_type_table_wild"
"dword_5FC630" = "g_inven_source_initialized"
"qword_596140" = "g_magictech_target_flag_values"
"dword_5B0C30" = "g_magictech_info_flag_map"
"dword_5B0C58" = "g_magictech_anim_goal_map"
"dword_5B0CD4" = "g_magictech_trait_idx_field_map"
"dword_5B0CE4" = "g_magictech_trait_idx_field_count"
"dword_5B0D3C" = "g_magictech_damage_flag_map"
"dword_5B0DC8" = "g_spell_eye_candy_sound_map"
"dword_5B0DE0" = "g_magictech_default_willpower_req"
"dword_5B0BA0" = "g_magictech_timeevent_find_id"
"dword_5B0F20" = "g_magictech_timeevent_find_recharge_id"
"dword_5E6D20" = "g_magictech_spell_list_mes_file"
"dword_5E6D24" = "g_magictech_invalidate_rect_func"
"dword_5E6D90" = "g_magictech_branch_component_idx"
"dword_5E75A0" = "g_magictech_cur_resistance_amount"
"dword_5E75CC" = "g_magictech_cur_eyecandy_has_callback"
"dword_5E75D0" = "g_magictech_cur_target_flags_after_damage"
"dword_5E75D4" = "g_magictech_cur_spell_has_callback"
"dword_5E75D8" = "g_magictech_cur_spell_has_end_callback"
"dword_5E75DC" = "g_magictech_cur_spell_processed_successfully"
"qword_5E75E0" = "g_magictech_cur_ai_attack_target"
"dword_5E75E4" = "g_magictech_unused_5E75E4"
"dword_5E75E8" = "g_magictech_cur_spell_action"
"dword_5E7600" = "g_magictech_disable_iq_requirement"
"dword_5E7604" = "g_magictech_interrupt_lock"
"dword_5E760C" = "g_magictech_recharge_schedule_time"
"dword_5E7624" = "g_magictech_component_branch_flag"
"dword_5E7628" = "g_magictech_parsing_spell_id"
"dword_5E762C" = "g_magictech_cur_spell_cost"
"dword_5E7630" = "g_magictech_callback_lock"
"dword_5E7634" = "g_magictech_timeevent_find_subtype"
"dword_6876DC" = "g_magictech_active_spell_count"
"off_5B0C0C" = "g_magictech_action_names"
"off_5B0C20" = "g_magictech_info_flag_names"
"off_5B0C40" = "g_magictech_anim_goal_names"
"off_5B0C70" = "g_magictech_damage_type_names"
"off_5B0C88" = "g_magictech_add_remove_names"
"off_5B0C90" = "g_magictech_flag_state_names"
"off_5B0C98" = "g_magictech_test_op_names"
"off_5B0CAC" = "g_magictech_test_obj_field_names"
"off_5B0CCC" = "g_magictech_trait_idx_field_names"
"off_5B0CDC" = "g_magictech_trait_idx_lookup_tables"
"off_5B0CF8" = "g_magictech_trait64_source_names"
"off_5B0D04" = "g_magictech_movement_location_names"
"off_5B0D14" = "g_magictech_damage_flag_names"
"off_5B0D64" = "g_magictech_action_aoe_mes_keys"
"off_5BBD70" = "g_magictech_target_flag_names"
"stru_5B0E28" = "g_summon_type_table_peaceful"
"stru_5B0E58" = "g_summon_type_table_elite_wild"
"stru_5B0E68" = "g_summon_type_table_familiar"
"stru_5B0E88" = "g_summon_type_table_wild_scaled"
"stru_5B0EB8" = "g_summon_type_table_undead_scaled"
"stru_5B0ED8" = "g_magictech_summon_tables"
"stru_5E3518" = "g_magictech_cur_target_list"
"stru_5E6D28" = "g_magictech_cur_target_context"
"stru_5E75C0" = "g_magictech_cur_anim_id"
"sub_44FE30" = "magictech_load_spell_definitions"
"sub_44FFA0" = "magictech_load_spell_effects"
"sub_450090" = "magictech_build_spell_info_from_mes"
"sub_4501D0" = "magictech_build_spell_effects_from_mes"
"sub_450240" = "magictech_free_spell_components"
"sub_455710" = "magictech_init_run_info_pool"
"sub_457100" = "magictech_reset_run_info_pool"
"sub_457580" = "magictech_init_spell_info_struct"
"sub_451070" = "magictech_process_spell_action"
"sub_452F20" = "magictech_process_pre_checks"
"sub_4534E0" = "magictech_process_spell_cancellation"
"sub_453630" = "magictech_init_target_context"
"sub_453710" = "magictech_process_check_caster_antimagic"
"sub_453FA0" = "magictech_process_state_transition"
"sub_455C30" = "magictech_internal_run_invocation"
"sub_456FA0" = "magictech_abort_spell_cast"
"sub_457000" = "magictech_run_action"
"sub_457030" = "magictech_run_action_delayed"
"sub_457060" = "magictech_process_spell_action_callback"
"sub_457270" = "magictech_force_end_spell"
"sub_4573D0" = "magictech_interrupt_spell_instance"
"sub_450420" = "magictech_deduct_cost"
"sub_4507B0" = "magictech_charge_spell"
"sub_4507D0" = "magictech_charge_spell_fatigue"
"sub_450940" = "magictech_check_can_pay_cost"
"sub_4532F0" = "magictech_charge_maintenance_cost"
"sub_453370" = "magictech_charge_maintenance_cost_resisted"
"sub_4537B0" = "magictech_calculate_spell_resistance"
"sub_4545E0" = "magictech_check_maintenance_conditions"
"sub_454700" = "magictech_check_range"
"sub_4551C0" = "magictech_check_unlock_difficulty"
"sub_455550" = "magictech_check_target_reflection_and_antimagic"
"sub_456430" = "magictech_check_disallowed_spell_flags"
"sub_456A10" = "magictech_check_tech_aptitude_for_item"
"sub_456A90" = "magictech_is_spell_target_still_valid"
"sub_454790" = "magictech_schedule_maintenance_timeevent"
"sub_4547F0" = "magictech_add_maintenance_timeevent_with_ui"
"sub_4548D0" = "magictech_add_timeevent_if_not_exists"
"sub_4570E0" = "magictech_timeevent_find_by_id"
"sub_459490" = "magictech_process_maintenance_timeevent"
"sub_4594D0" = "magictech_timeevent_find_item_recharge"
"sub_459500" = "magictech_reschedule_timeevent_after_load"
"sub_459640" = "magictech_recharge_timeevent_add_mana"
"sub_459680" = "magictech_recharge_timeevent_process"
"sub_4502B0" = "magictech_get_begin_aoe_radius"
"sub_450A50" = "magictech_get_spell_owner"
"sub_450AC0" = "magictech_get_active_maintained_spell_count"
"sub_450B90" = "magictech_get_max_maintained_spells"
"sub_453410" = "magictech_find_active_spell_on_obj"
"sub_453B20" = "magictech_get_spell_resistance_chance"
"sub_453CC0" = "magictech_get_item_spell_resistance_chance"
"sub_455100" = "magictech_count_spells_applying_flag"
"sub_459170" = "magictech_find_first_spell_with_flag"
"sub_459290" = "magictech_find_first_spell_on_obj"
"sub_459F20" = "magictech_get_begin_aoe_flags_ptr"
"sub_459FF0" = "magictech_is_run_info_id_valid"
"sub_45A030" = "magictech_has_item_triggers"
"sub_45A060" = "magictech_get_sector_aptitude_adj"
"sub_45A580" = "magictech_is_target_visible"
"sub_44F3C0" = "magictech_run_info_save"
"sub_44F620" = "magictech_run_info_load"
"sub_455820" = "magictech_run_info_validate_objects"
"sub_4559E0" = "magictech_run_info_reset_temp"
"sub_456D20" = "magictech_get_casting_fx_art"
"sub_456E00" = "magictech_play_secondary_casting_fx"
"sub_456E60" = "magictech_play_fx_by_id"
"sub_456EC0" = "magictech_remove_fx_by_id"
"sub_458AE0" = "magictech_get_spell_icon_art"
"sub_458B70" = "magictech_get_projectile_art"
"sub_458C00" = "magictech_play_projectile_fx"
"sub_458CA0" = "magictech_get_projectile_speed"
"sub_45A4F0" = "magictech_remove_fx_node"
"sub_45A520" = "magictech_play_resist_fx"
"sub_457530" = "magictech_disassociate_source_item"
"sub_459740" = "magictech_handle_object_destroyed"
"sub_4598D0" = "magictech_handle_object_pre_remove"
"sub_459A20" = "magictech_handle_object_fleeing"
"sub_459C10" = "magictech_check_spell_break_on_hit"
"sub_459EA0" = "magictech_remove_tempus_fugit_and_familiar_flags"
"sub_450C10" = "magictech_obj_set_spell_flags"
"sub_452650" = "magictech_component_movement_teleport_to_area"
"sub_452CD0" = "magictech_revert_polymorph_art"
"sub_453D40" = "magictech_apply_component_target_override"
"sub_453EE0" = "magictech_notify_ai_if_aggressive_spell"
"sub_453F20" = "magictech_notify_ai_attack"
"sub_455250" = "magictech_adjust_spell_duration_by_aptitude"
"sub_455350" = "magictech_teleport_obj_with_tile_scripts"
"sub_4554B0" = "magictech_add_summoned_obj_to_list"
"sub_4578F0" = "magictech_build_spell_stats"
"sub_457B20" = "magictech_build_spell_anim_info"
"sub_457D00" = "magictech_build_spell_flags"
"sub_458060" = "magictech_build_effect_info"
"sub_459F50" = "magictech_reset_ai_data"
"sub_45A480" = "magictech_free_run_info_and_lists"
"sub_45A760" = "magictech_debug_print_obj_info"
"sub_412FD0" = "dialog_begin"
"sub_413130" = "dialog_select_option"
"sub_413280" = "dialog_end"
"sub_4132A0" = "dialog_get_greeting_msg"
"sub_413A30" = "dialog_goto_line"
"sub_418A00" = "dialog_parse_speech_id"
"sub_414810" = "dialog_handle_pc_action"
"sub_414E60" = "dialog_find_replies"
"sub_4150D0" = "dialog_check_conditions"
"sub_415BA0" = "dialog_execute_actions"
"sub_4167C0" = "dialog_parse_action_value"
"sub_416840" = "dialog_process_npc_line"
"sub_416B00" = "dialog_substitute_tokens"
"sub_416C10" = "dialog_build_pc_option"
"sub_4189C0" = "dialog_create_speech_id"
"sub_418B30" = "dialog_perform_payment"
"sub_418C40" = "dialog_show_failure_msg"
"sub_419260" = "dialog_handle_greetings"
"sub_4197D0" = "dialog_handle_greeting_override"
"sub_4C1020" = "ai_enter_dialog"
"sub_4C10A0" = "ai_exit_dialog"
"sub_45A7C0" = "datetime_get_current"
"sub_466E50" = "world_drop_object_at"
"sub_4C1150" = "barter_get_haggled_price"
"dword_5FF570" = "facade_data_height"
"dword_5FF574" = "facade_data_width"
"qword_5FF578" = "facade_data_origin_loc"
"dword_5FF588" = "facade_current_map_id"
"dword_5FF5A0" = "facade_art_id_grid"
"dword_5FF5A4" = "facade_top_down_buffers"
"sub_4CA0F0" = "facade_load_data"
"sub_4CA240" = "facade_free_data"
"sub_4CA6B0" = "facade_clip_rect_and_get_start_indices"
"sub_4CA7C0" = "facade_get_data_screen_rect"
"sub_4CA2C0" = "facade_set-or-update_palette"
"stru_5B5790" = "s_mp_damage_checks"
"dword_5B57A8" = "s_dodge_crit_chance_tbl"
"dword_5B57FC" = "s_multi_arrow_anim_params"
"dword_5B5818" = "s_reaction_to_flag_tbl"
"qword_5FC238" = "s_tb_saved_target_obj"
"dword_5FC240" = "s_tb_current_turn_node"
"qword_5FC248" = "s_tb_prev_turn_obj"
"dword_5FC250" = "s_tb_current_turn_index"
"qword_5FC258" = "s_tb_stuck_check_obj"
"dword_5FC260" = "s_tb_stuck_check_last_ap"
"dword_5FC264" = "s_tb_critter_is_stuck"
"dword_5FC26C" = "s_in_damage_script"
"qword_5FC270" = "s_tb_debug_obj"
"sub_4EDF20" = "item_drop_at_loc"
"sub_465020" = "critter_update_weapon_art"
"sub_4AA580" = "ui_update_combat_hotkeys"
"sub_4F0640" = "obj_get_oid"
"sub_4AD6E0" = "npc_resurrect_ai_init"
"sub_4BB900" = "ui_is_tb_cursor_locked"
"sub_4BB8E0" = "ui_tb_lock_cursor"
"sub_4BB910" = "ui_tb_unlock_cursor"
"sub_4BB8F0" = "ui_tb_lock_cursor_maybe"
"sub_45C0E0" = "timeevent_is_queued"
"sub_45E180" = "critter_remove_from_party"
"sub_45E460" = "critter_num_all_followers"
"sub_45F710" = "critter_teleport_map_init"
"sub_467520" = "player_hotkey_items_to_inventory"
"sub_4EDDE0" = "player_xp_changed_notify"
"sub_460630" = "ui_message_post"
"sub_4F0070" = "obj_arrayfield_handle_set"
"sub_4F0570" = "obj_arrayfield_set_length"
"sub_463860" = "critter_drop_inventory_on_decay"
"sub_45A820" = "time_get_elapsed_seconds"
"sub_42CA90" = "AG_CheckAnimNotRunning"
"sub_42CC80" = "AG_UpdateAnimFrame"
"sub_42CB10" = "AG_BeginAnim"
"sub_426F10" = "AG_CheckIsProne"
"sub_426E80" = "AG_CheckIsConcealed"
"sub_433270" = "AG_EndAnimAction"
"sub_42BD40" = "AG_SetAnim"
"sub_42CAA0" = "AG_CheckActionFramePassed"
"sub_424D90" = "AG_CheckIsNotAtTargetTile"
"sub_425740" = "AG_CheckPathNotBuilt"
"sub_426040" = "AG_BuildPathToTile"
"sub_42C610" = "AG_SetRotationFromPath"
"sub_42B940" = "AG_SetRunningFlag"
"sub_4305D0" = "AG_UpdateMoveFrame"
"sub_42E9B0" = "AG_BeginMoveAnim"
"sub_430F20" = "AG_EndMoveCleanup"
"sub_427730" = "AG_BuildPathNearTile"
"sub_425130" = "AG_CheckIsNearObject"
"sub_427990" = "AG_BuildPathNearObject"
"sub_4280D0" = "AG_BuildPathNearObjectCombat"
"sub_425270" = "AG_CheckIsNearTile"
"sub_425340" = "AG_CheckIsNearObject_Follow"
"sub_4254C0" = "AG_CheckPathfindingFailed_MoveNear"
"sub_425590" = "AG_CheckPathfindingFailed_MoveNearCombat"
"sub_426A80" = "AG_BuildPathAwayFromObject"
"sub_42C440" = "AG_UpdateRotation"
"sub_42C650" = "AG_EndRotation"
"sub_42C240" = "AG_RotateAwayFromTargetObj"
"sub_42C390" = "AG_RotateToTargetTile"
"sub_42C780" = "AG_RotateToPathDirection"
"sub_42BEA0" = "AG_SetRange"
"sub_42BF40" = "AG_SetFollowRange"
"sub_42BFD0" = "AG_CheckIsTooClose_Follow"
"sub_425930" = "AG_BuildPathWander"
"sub_425D60" = "AG_BuildPathWanderSeekDarkness"
"sub_424E00" = "AG_FindMoveAwayTile"
"sub_4270B0" = "AG_CheckNextStepBlocked"
"sub_425430" = "AG_CheckPathfindingFailed"
"sub_427640" = "AG_CheckIsWindow"
"sub_4272E0" = "AG_CheckIsDoor"
"sub_4288A0" = "AG_CheckCanJumpWindow"
"sub_429450" = "AG_CheckTargetNotDead"
"sub_4294A0" = "AG_CheckAttackLOS"
"sub_429960" = "AG_CheckIsInRange"
"sub_432990" = "AG_UpdateAttackAnim"
"sub_42C0F0" = "AG_RotateToTargetObj"
"sub_42B9C0" = "AG_BeginAttackAnim"
"sub_432700" = "AG_BeginAttackAnimWithSound"
"sub_42A630" = "AG_PerformAttackHit"
"sub_42A930" = "AG_CheckIsRangedWeapon"
"sub_429AD0" = "AG_CheckIsMeleeWeapon"
"sub_429760" = "AG_CheckAutoAttack"
"sub_429B50" = "AG_CheckSpellPrereqs"
"sub_429BC0" = "AG_CheckSpellLOS"
"sub_42C850" = "AG_RotateToSpellTarget"
"sub_429CD0" = "AG_SpellCleanup"
"sub_429C40" = "AG_CheckSpellHasProjectile"
"sub_424820" = "AG_CreateProjectile"
"sub_429C80" = "AG_CastSpell"
"sub_429F00" = "AG_GetSpellCastingArt"
"sub_42A010" = "AG_BeginAnimWithPrevId"
"sub_42A200" = "AG_AbortSpellCast"
"sub_42BE80" = "AG_SetSkillData"
"sub_42A2A0" = "AG_PerformSkillCheck"
"sub_42A430" = "AG_CheckSkillSuccess"
"sub_4284A0" = "AG_CheckTargetIsDoor"
"sub_4284F0" = "AG_CheckDoorIsClosed"
"sub_428750" = "AG_CheckDoorIsLocked"
"sub_4287E0" = "AG_TryUnlockDoor"
"sub_428690" = "AG_CheckCanOpenDoor"
"sub_428550" = "AG_TryOpenDoor"
"sub_4246E0" = "AG_PushGoal"
"sub_428620" = "AG_CheckDoorNotMagicallyHeld"
"sub_428A10" = "AG_PerformUseObject"
"sub_428930" = "AG_SetUseRange"
"sub_42BE50" = "AG_SetScratchObjToTargetObj"
"sub_42A9B0" = "AG_CheckCanPickupItem"
"sub_428CD0" = "AG_PerformUseItemOnObject"
"sub_428E10" = "AG_PerformUseItemOnObjectWithSkill"
"sub_429040" = "AG_PerformUseItemOnTile"
"sub_429160" = "AG_PerformUseItemOnTileWithSkill"
"sub_42A4E0" = "AG_PerformPicklockSkill"
"sub_42D440" = "AG_UpdatePicklockAnim"
"sub_42D300" = "AG_BeginPicklockAnim"
"sub_42AB90" = "AG_PerformThrowItem"
"sub_42B440" = "AG_EndThrowItemCleanup"
"sub_42B640" = "AG_EndDoorOpenCleanup"
"sub_42B6F0" = "AG_EndDoorCloseCleanup"
"sub_42B790" = "AG_CheckDoorNotSticky"
"sub_42B7F0" = "AG_CheckDoorNotBlocked"
"sub_42F6A0" = "AG_UpdateProjectileMove"
"sub_424BC0" = "AG_RotateProjectile"
"sub_424D00" = "AG_DestroySelf"
"sub_42A180" = "AG_CheckProjectileAtTarget"
"sub_429ED0" = "AG_GetProjectileSpeed"
"sub_42BEC0" = "AG_UpdateProjectileTargetLoc"
"sub_429E70" = "AG_DestroySelfCleanup"
"sub_42CAC0" = "AG_ProjectileHitCleanup"
"sub_4269D0" = "AG_BuildPathStraight_Projectile"
"sub_42F5C0" = "AG_BeginProjectileMove"
"sub_431320" = "AG_CheckEyeCandyNotStarted"
"sub_431130" = "AG_CheckFloatingNotStarted"
"sub_431150" = "AG_UpdateFloating"
"sub_4311F0" = "AG_BeginFloating"
"sub_431290" = "AG_EndFloating"
"sub_431B20" = "AG_EndEyeCandyCleanup"
"sub_4296D0" = "AG_PlaySoundFromScratch"
"sub_42D6F0" = "AG_UpdateDyingAnim"
"sub_42BC10" = "AG_SetDeathAnimation"
"sub_42D570" = "AG_BeginDyingAnim"
"sub_42FED0" = "AG_ProcessDeath"
"sub_42FF40" = "AG_SetDeadState"
"sub_42FFE0" = "AG_DeadCleanup"
"sub_42E070" = "AG_UpdateStunAnim"
"sub_426F60" = "AG_CheckStunFinished"
"sub_42B250" = "AG_EndStunCleanup"
"sub_42E460" = "AG_CheckNotUnconscious"
"sub_42E8B0" = "AG_UpdateAnimReverse"
"sub_42E720" = "AG_BeginAnimReverse"
"sub_42AFB0" = "AG_EndUnconceal"
"sub_42E6B0" = "AG_GetUnconcealAnimId"
"sub_4293D0" = "AG_SetNoFleeFlag"
"sub_4298D0" = "AG_CheckFidgetConditions"
"sub_42CDF0" = "AG_BeginFidgetAnim"
"sub_42CF40" = "AG_UpdateFidgetAnim"
"sub_42DCF0" = "AG_CheckAnimLoopConditions"
"sub_42DDE0" = "AG_UpdateAnimLoopFrame"
"sub_42DED0" = "AG_StopLoopSound"
"sub_42D7D0" = "AG_BeginJumpAnim"
"sub_42D910" = "AG_UpdateJumpAnim"
"sub_42F140" = "AG_EndJump"
"sub_42E1B0" = "AG_BeginKneelMagicHandsAnim"
"sub_42E2D0" = "AG_UpdateKneelMagicHandsAnim"
"sub_423C80" = "anim_schedule_next_tick"
"sub_436220" = "anim_goal_use_picklock_skill_internal"
"sub_436720" = "anim_find_blocker_on_tile"
"sub_436CB0" = "anim_goal_set_flee_flag"
"sub_437460" = "anim_modify_data_init"
"sub_4248A0" = "CreateProjectileInternal"
"sub_4257E0" = "anim_get_movement_path_flags"
"sub_425840" = "anim_check_los_ignoring_target"
"sub_425BF0" = "anim_set_pathfinding_flags"
"sub_426500" = "anim_path_find_from_obj"
"sub_427110" = "anim_check_next_step_blocked_internal"
"sub_4273B0" = "anim_find_jumpable_window_at_loc"
"sub_4294F0" = "CheckLOS"
"sub_42AA70" = "PerformItemPickup"
"sub_42EDC0" = "anim_select_move_animation"
"sub_42EE90" = "anim_calculate_move_delay"
"sub_42FD70" = "anim_check_knockback_path_blocked"
"sub_4302D0" = "anim_fidget_find_candidates"
"sub_4303D0" = "anim_fidget_is_candidate"
"sub_430FC0" = "anim_deduct_move_cost"
"sub_431550" = "anim_play_eyecandy_looping_sound"
"sub_4319F0" = "anim_update_looping_sound_pos"
"sub_432CF0" = "anim_check_ammo"
"sub_4339A0" = "anim_can_obj_be_commanded"
"sub_437D00" = "anim_goal_pop_stack_internal"
"sub_423FB0" = "anim_recount_active_goals"
"sub_42AE10" = "AG_CheckIsInTalkRange"
"sub_423530" = "anim_debug_hook_pre_state"
"sub_423540" = "anim_debug_hook_pre_state_call"
"sub_423550" = "anim_debug_hook_post_state_call"
"dword_5E3500" = "g_anim_system_active"
"dword_6876E4" = "g_anim_save_version"
"dword_5DE6CC" = "g_anim_please_move_delay"
"qword_5DE6D8" = "g_anim_last_fidget_obj"
"dword_5DE6E0" = "g_anim_disable_fidgets"
"dword_5DE6E4" = "g_anim_float_offset_y"
"stru_5A1908" = "g_anim_slot_scratch"
"dword_5E34F4" = "g_anim_interrupt_priority_3_flag"
"dword_5E34F8" = "g_anim_completion_callback"
"dword_5A5978" = "g_anim_current_run_index"
"dword_739E40" = "g_anim_unknown_739E40"
"dword_739E44" = "g_anim_unknown_739E44"
"sub_44C9A0" = "AnimGoalIsPassive"
"sub_44C8F0" = "AnimRunClearGoalNode"
"sub_44CB60" = "AnimIsProcessingSlot"
"sub_44CCB0" = "AnimAllocateSlot"
"sub_44D0C0" = "AnimStub_44D0C0"
"sub_44D500" = "AnimGoalDataInitNoPriority"
"sub_44D540" = "AnimGoalStartEx"
"sub_44D730" = "AnimGoalStartLocal"
"sub_44DBE0" = "AnimGoalAddSubGoal"
"sub_44E050" = "InterruptAttackOnParty"
"sub_44E0E0" = "InterruptAttackOnTarget"
"sub_44E160" = "AnimGoalCancel"
"sub_44E4D0" = "InterruptAnimsByType"
"sub_44E710" = "AnimGoalFindExisting"
"sub_44D0D0" = "AnimSendFreeSlotPacket"
"dword_5B052C" = "s_slotToClearTimeEvents"
"stru_5E3000" = "s_animIdToClearTimeEvents"
"stru_5E33F8" = "s_scratchPath"
"sub_44D240" = "AnimResetSlot"
"sub_44CB70" = "TimeEventMatchesAnim"
"sub_44D3B0" = "AnimGoalDataInitInternal"
"sub_44EAD0" = "AnimGoalTypeIsPersistent"
"stru_5B5088" = "g_npcWaitHereDelays"
"dword_5F5CB0" = "g_aiParamsTable"
"Func5F848C" = "AiCombatInitiationCallbackFunc"
"sub_4AA300" = "ai_clear_hostility"
"sub_4ABBC0" = "ai_get_or_find_combat_target"
"sub_4AD790" = "ai_schedule_process_immediate"
"sub_4A88D0" = "ai_context_init"
"sub_4A92D0" = "ai_update_state"
"sub_4A9B80" = "ai_notify_followers_to_attack"
"sub_4A9C00" = "ai_follower_join_attack"
"sub_4A9E10" = "ai_notify_nearby_npcs_of_attack"
"sub_4AA420" = "ai_clear_target_from_combat_fields"
"sub_4AAF50" = "ai_try_cast_flee_spell"
"sub_4AB030" = "ai_has_fled_far_enough"
"sub_4AB2A0" = "ai_decide_fight_or_flee"
"sub_4ABC20" = "ai_try_find_magictech_action"
"sub_4ABC70" = "ai_select_combat_magictech_action"
"sub_4ABE20" = "ai_get_magictech_action_chance"
"sub_4ABF10" = "ai_evaluate_action_list"
"sub_4AD420" = "ai_is_near_player"
"sub_4AD4D0" = "ai_process_follower_catchup"
"sub_4AD700" = "ai_schedule_process_delay_ms"
"sub_4AD730" = "ai_schedule_process_at_datetime"
"sub_4AE450" = "ai_check_avenge_dead_ally"
"sub_4AF8C0" = "ai_shitlist_add_party"
"S4ABF10" = "AiActionRequest"
}  # <-- important: hashtable CLOSED here

# Build a fast combined regex:  \b(?:key1|key2|...)\b
$escapedKeys = $RenameMap.Keys | ForEach-Object { [Regex]::Escape($_) }
$pattern = '\b(?:' + ($escapedKeys -join '|') + ')\b'
$regex = [System.Text.RegularExpressions.Regex]::new($pattern)

# Files
$files = Get-ChildItem -Recurse -Include *.c, *.h -Path $SearchDir -File
$changedCount = 0

foreach ($f in $files) {
    $text = Get-Content -LiteralPath $f.FullName -Raw
    $newText = $regex.Replace($text, { param($m) $RenameMap[$m.Value] })
    if ($newText -ne $text) {
        Write-Host "Updated: $($f.FullName)"
        if (-not $DryRun) {
            Set-Content -LiteralPath $f.FullName -Value $newText -NoNewline -Encoding UTF8
        }
        $changedCount++
    }
}

Write-Host "--------------------------------------------------------"
if ($DryRun) {
    Write-Host "Dry run complete. Files that would change: $changedCount"
} else {
    Write-Host "Batch rename complete. Files changed: $changedCount"
}
Read-Host "Press Enter to exit..."
